%import common.DIGIT
%import common.NEWLINE
%import common.SIGNED_INT -> NUMBER
%import common.WS_INLINE
ID_CONTINUE: ID_START | /[\p{Mn}\p{Mc}\p{Nd}\p{Pc}Â·]+/
ID_START: /[\p{Lu}\p{Ll}\p{Lt}\p{Lm}\p{Lo}\p{Nl}_]+/
NAME: ID_START ID_CONTINUE*
PUNCTUATION: _EXCLAMATION_MARK | _QUESTION_MARK | _PERIOD //uppercase places tokens in tree
_ADD: "+"
_AND: "en"
_ASK : "vraag"
_AT: "opplek"
_COLON: ":"
_COMMA: ","
_DIVIDE: "/"
_DOUBLE_EQUALS: "=="
_ECHO : "herhaal"
_ELIF: "anders"
_ELSE: "anders"
_END_BLOCK: "end-block"
_EOL: "\r"?"\n"
_EQUALS: "="
_EXCLAMATION_MARK: "!"
_FOR: "voor"
_FORWARD : "vooruit"
_HASH: "#"
_IF: "als"
_IN: "in"
_INPUT: "invoer"
_IS: "is"
_LARGER: ">"
_LARGER_EQUALS: ">="
_LEFT_BRACKET : "("
_LEFT_SQUARE_BRACKET : "["
_LENGTH: "lengte"
_MULTIPLY: "*"
_NOT_EQUALS: "!="
_OR: "of"
_PERIOD: "."
_PRINT : "drukaf"
_QUESTION_MARK: "?"
_RANGE: "bereik"
_REPEAT: "herhaal"
_RIGHT_BRACKET : ")"
_RIGHT_SQUARE_BRACKET : "]"
_SMALLER : "<"
_SMALLER_EQUALS : "<="
_SPACE: " "+
_STEP: "stap"
_SUBTRACT: "-"
_TIMES: "keer"
_TO: "tot"
_TURN: "draai"
_WHILE: "zolang"
ask: var _SPACE _IS _SPACE _ASK (_SPACE (_SPACE| list_access | quoted_text | var_access)*)?
ask_no_quotes: var _SPACE _IS _SPACE _ASK _SPACE (_SPACE| list_access | textwithoutspaces | punctuation)*  -> print_nq
assign: var _SPACE _IS _SPACE text -> assign
assign_list: var _SPACE _IS _SPACE text ((_COMMA _SPACE|_COMMA) text)+
command: print | ask | turtle | assign_list | ask_no_quotes| assign | print_no_quotes | invalid //catch all at the end
echo: _ECHO (_SPACE text)?
index : NUMBER //todo FH-June 21 : why does this need its own rule? can't it just be a token
invalid: textwithoutspaces text?
invalid_space: _SPACE text
list_access: var _SPACE _AT _SPACE (index | random) -> list_access //todo: could be merged with list_access_var?
print: _PRINT (_SPACE (_SPACE| list_access | quoted_text | var_access)*)?  -> print
print_no_quotes: _PRINT _SPACE text -> print_nq
program: _EOL* command (_SPACE)* (_EOL+ command (_SPACE)*)* _EOL* //lines may end on spaces and might be separated by many newlines
punctuation : PUNCTUATION -> punctuation
quoted_text: /'((?:[^\\']|\\.)*)'/ -> text //text can be between single quotes, but quotes may be escaped with \
quoted_text_no_escape: /'([^']*)'/ -> text //simply all between quotes should this be used at earlier levels?
random : "willekeurig" //random needs to appear in the tree for further processing so does not start with _ or is uppercase
start: program
text: /([^\n,]+)/ -> text
textwithoutspaces: /([^\r\n, *+-\/]+)/ -> text
turtle: _FORWARD (_SPACE (NUMBER | list_access | textwithoutspaces))? -> forward | _TURN (_SPACE (list_access | textwithoutspaces))? -> turn
var: NAME -> var
var_access : NAME